# Document Template Customizer (DTC)

This tool allows you to produce *personalized document templates* from a larger base template repository, such as https://github.com/bflorat/architecture-document-template[this one].

While I‚Äôve received good feedback on my previous document templates, a recurring criticism was that the *templates were too large*, leaving many sections unused. With DTC, you can *prepare smaller, tailored templates* filtered from a larger one.

DTC can work not only with my own templates, but also with any base document template (self-hosted or not), as long as it follows a small metamodel.

## Common use-case

. An expert (typically an *Enterprise Architect*) selects or writes a base template. This base template is usually organization-wide.
. Another expert (typically a *Solution Architect*) creates a customized, curated template for one or several projects. This includes both a *full template with explanations* and *blank documents* to be filled.
. The project team then fills the *blank documents*, guided by the explanations in the customized template.

## Prerequisites for a Base Template

* The template must be written in **AsciiDoc (Asciidoctor flavor)** ‚Äî with sections starting with `#` characters, not `=` ‚Äî or in **Markdown**.
* A **`README.adoc`** or **`README.md`** file must be present at the root of the base template URL, providing an introduction.

[TIP]  
We strongly recommend using **AsciiDoc** rather than Markdown for important documents, as it provides richer features such as admonitions, better tables, and an automatic table of contents.

* A **`base-template-metadata.yaml`** file must be present at the root of the base template URL. A sample is provided below.

.Sample `base-template-metadata.yaml` :

```
author: ACME
license: CC BY-SA 4.0
parts:
  - name: Application
    file: view-application.adoc
  - name: Development
    file: view-development.adoc
  - name: infrastructure
    file: view-infrastructure.adoc  
labels:
  - detail_level: 
      - abstract      # conceptual, principles, big picture
      - overview      # broad but slightly more concrete
      - detailed      # technical specifics, diagrams, modules
      - in-depth      # exhaustive detail, e.g., data models, algorithms
  - name: persistence
  - name: green-IT
```

* Every section of each part file of the base template should be annotated with a metadata line like : `üè∑{"id": "74c82505-5f47-4342-8f1b-f6951d603062", "labels": ["level::basic", "project_size::*", "detail_level::abstract","introduction"]}`
  ** Keep a blank line between the metadata line and the section title line.



## Features
* [ ] Liens predefinis vers un site central (ex: contraintes) ?

## CLI usage

Build the CLI once, then generate a filtered archive:

```
npm run cli -- --base-url https://raw.githubusercontent.com/bflorat/architecture-document-template/refs/heads/feat/add-medadata  --include level::basic,persistence 
```

Options:

* `--base-url` (`-b`) ‚Äì required. The template root exposing `base-template-metadata.yaml`.
* `--include` (`-i`) ‚Äì comma-separated labels to keep (matching sections stay, others are pruned). Unknown labels abort the run.
* `--output` (`-o`) ‚Äì optional zip destination relative to the current directory (defaults to `custom-template.zip`).
* `--output-file` ‚Äì optional absolute or relative output path.

The generated archive contains two folders:

* `template/` keeps the filtered parts with their metadata marker lines intact.
* `blank-template/` contains the same parts reduced to section titles and AsciiDoc attributes (body text removed).

If none `--include` labels are provided, the resulting template contains every base template sections. The base template **must** expose a `README.adoc` (case-insensitive) alongside `base-template-metadata.yaml`.

## History

I want to write a small project in react.js 19 that allow to compute asciidoc documents from a base asciidoc document template. It contains an url selector to select an URL that contain a 'base-template-metadata.yaml' file like https://github.com/bflorat/architecture-document-template/tree/feat/add-medadata/ .



Sample  base-template-metadata.yaml : 

```
author: Bertrand Florat
license: CC BY-SA 4.0
parts:
  - name: Application
    file: view-application.adoc
  - name: Development
    file: view-development.adoc
  - name: infrastructure
    file: view-infrastructure.adoc
  - name: Security
    file: security.adoc
  - name: sizing
    file: view-sizing.adoc
```

https://raw.githubusercontent.com/bflorat/architecture-document-template/refs/heads/feat/add-medadata/base-template-metadata.yaml


```
üè∑{"id":"5a5f3bc5-7a1d-4f68-8385-8e1a19faf288", 
   "labels":["stockage_persistent", "niveau::avanc√©", "taille_projet::moyen", "taille_projet::grand"]}
# Gestion des transactions
[...]

üè∑{"id":"a1e81580-8a2d-4d4d-8f99-6c9ae9ace122", 
   "labels":["greenit", "niveau::avanc√©"], 
   "link_to":"51bc1362-9c2f-4cd8-81d9-face77ed4dc6"}
   
# √âcoconception
[...]
```

## Others features ?

* Ability to remove / add a specified section by number (2, 4.5...)
* Store configs (ex: set of selected labels...) so I can reopen it later
* Done: Keep all sections from the base template : just select none label

## TODO
